<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BotWar Controller</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 600px;
        margin: 50px auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .container {
        background: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        text-align: center;
        margin-bottom: 30px;
      }
      .controls {
        text-align: center;
        margin: 30px 0;
      }
      .key {
        display: inline-block;
        width: 60px;
        height: 60px;
        margin: 5px;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 18px;
        cursor: pointer;
      }
      .key:hover {
        background: #0056b3;
      }
      .key:active {
        background: #004085;
      }
      .status {
        margin: 20px 0;
        padding: 15px;
        background: #e9ecef;
        border-radius: 5px;
        text-align: center;
      }
      .current-action {
        font-size: 18px;
        font-weight: bold;
        color: #28a745;
      }
      .instructions {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 5px;
        margin-top: 20px;
      }
      .instructions h3 {
        margin-top: 0;
      }
      .instructions ul {
        margin: 10px 0;
        padding-left: 20px;
      }
      .instructions li {
        margin: 5px 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üéÆ BotWar Controller</h1>

      <div class="status">
        <div class="current-action" id="currentAction">STAY - COLLECT</div>
      </div>

      <div class="controls">
        <div>
          <button class="key" data-move="UP">‚Üë</button>
        </div>
        <div>
          <button class="key" data-move="LEFT">‚Üê</button>
          <button class="key" data-move="STAY">‚è∏</button>
          <button class="key" data-move="RIGHT">‚Üí</button>
        </div>
        <div>
          <button class="key" data-move="DOWN">‚Üì</button>
        </div>
      </div>

      <div class="instructions">
        <h3>Controls:</h3>
        <ul>
          <li>
            <strong>Arrow keys</strong> or <strong>click buttons</strong> to
            move
          </li>
          <li><strong>Spacebar</strong> to stay in place</li>
        </ul>
      </div>
    </div>

    <script>
      let currentMove = "STAY";
      let currentAction = "COLLECT";

      function updateDisplay() {
        document.getElementById(
          "currentAction"
        ).textContent = `${currentMove} - ${currentAction}`;
      }

      async function sendAction(move) {
        currentMove = move;
        updateDisplay();

        try {
          await fetch("/action", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ move: currentMove, action: currentAction }),
          });
        } catch (error) {
          console.error("Error sending action:", error);
        }
      }

      document.querySelectorAll(".key").forEach((button) => {
        button.addEventListener("click", () => {
          sendAction(button.getAttribute("data-move"));
        });
      });

      document.addEventListener("keydown", (event) => {
        const moves = {
          ArrowUp: "UP",
          ArrowDown: "DOWN",
          ArrowLeft: "LEFT",
          ArrowRight: "RIGHT",
          " ": "STAY",
        };

        if (moves[event.key]) {
          event.preventDefault();
          sendAction(moves[event.key]);
        }
      });

      updateDisplay();
    </script>
  </body>
</html>
